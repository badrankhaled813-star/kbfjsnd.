<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø·Ø¹Ù… Ù†ÙƒØ´Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ - Ø£Ø´Ù‡Ù‰ Ø§Ù„Ø£Ø·Ø¨Ø§Ù‚ Ø§Ù„Ø´Ø±Ù‚ÙŠØ© ÙˆØ§Ù„ØºØ±Ø¨ÙŠØ©</title>
    <link rel="icon" type="image/png" href="img/naksha logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/naksha logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --ll-color: #333333;
            --list-color: #8B0000;
            --errr-color: #E57373;
            --sss-color: #4CAF93;
            --trash-: #E57373;
            --error-color: #E57373;
            --new-color: #4CAF93;
            --icon-hot-color: #E57373;
            --primary-color: #27ae60;
            --primary-dark: #E85A2B;
            --secondary-color: #2C3E50;
            --accent-color: #D4A574;
            --accent-dark: #00B88A;
            --warning-color: #FFB627;
            --danger-color: #D4A574;
            --text-primary: #2C3E50;
            --text-secondary: #7F8C8D;
            --text-light: #BDC3C7;
            --bg-light: #F8F9FA;
            --bg-dark: #1A1A2E;
            --border-color: #E8EAED;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --shadow-xl: 0 12px 40px rgba(0, 0, 0, 0.15);
            --border-radius: 16px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #B93532;
            min-height: 100vh;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ========== HEADER ========== */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--list-color);
        }

        .store-name {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--list-color);
            margin: 0;
        }

        .store-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 0.2rem;
        }

        .cart-button {
            position: relative;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.9rem 1.8rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .cart-button:hover {
            background: #5D6D7E;
            transform: translateY(-1px);
        }

        .cart-count {
            background: #dc2626;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* ========== HERO ========== */
        .hero {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            padding: 3rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* ========== CATEGORIES ========== */
        .categories-wrapper {
            position: relative;
            margin-bottom: 3rem;
            padding: 0 10px;
        }

        .categories-container {
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            scroll-behavior: smooth;
            padding: 10px 0;
            cursor: grab;
        }

        .categories-container::-webkit-scrollbar {
            display: none;
        }

        .categories {
            display: flex;
            gap: 1rem;
            padding: 0 5px;
            min-width: min-content;
            flex-wrap: nowrap;
        }

        .category {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            padding: 0.75rem 1.5rem;
            border: 2px solid transparent;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            flex-shrink: 0;
            user-select: none;
        }

        .category:hover,
        .category.active {
            background: var(--ll-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* ========== PRODUCTS ========== */
        .products-container {
            background-color: transparent;
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 3rem;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
        }

        .product-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-info {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .product-button {
            width: 100%;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .product-button:hover:not(:disabled) {
            background: #5D6D7E;
            transform: translateY(-2px);
        }

        .product-button:disabled {
            background: #D32F2F;
            cursor: not-allowed;
            opacity: 0.8;
        }

        .prep-time {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 50px;
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }

        /* ========== MODAL ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #D6B98C;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translate(-50%, -60%); opacity: 0; }
            to { transform: translate(-50%, -50%); opacity: 1; }
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
            position: relative;
        }

        .close-modal {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: #E57373;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: #dc2626;
            transform: translateY(-50%) scale(1.1);
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-footer {
            padding: 1rem 2rem;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* ========== SIZE OPTIONS ========== */
        .size-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .size-option {
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .size-option:hover {
            border-color: var(--primary-color);
        }

        .size-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* ========== QUANTITY CONTROLS ========== */
        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
            background: white;
            padding: 0.5rem;
            border-radius: 50px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .quantity-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 1.5rem;
            font-weight: 700;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .quantity-btn:active {
            background: #5D6D7E;
            transform: scale(0.9);
        }

        .quantity-display {
            font-size: 1.4rem;
            font-weight: 700;
            min-width: 60px;
            text-align: center;
            padding: 0.5rem 1rem;
            color: var(--primary-color);
            user-select: none;
            -webkit-user-select: none;
        }

        /* ========== CART ========== */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-total {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-align: center;
            margin: 1rem 0;
            padding: 1rem;
            background: var(--secondary-color);
            border-radius: var(--border-radius);
        }

        .total-prep-time {
            background: var(--accent-color);
            color: white;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 1rem 0;
            font-weight: 600;
        }

        /* ========== FORM ========== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-error {
            color: var(--error-color);
            font-size: 0.9rem;
            margin-top: 0.25rem;
            display: none;
        }

        /* ========== DELIVERY CARDS ========== */
        .delivery-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 14px;
            margin-top: 10px;
        }

        .delivery-card {
            padding: 18px;
            border-radius: 16px;
            border: 1px solid #e5e7eb;
            background: #fff;
            cursor: pointer;
            transition: 0.3s ease;
            text-align: center;
            position: relative;
        }

        .delivery-card .icon {
            font-size: 22px;
            margin-bottom: 8px;
        }

        .delivery-card h4 {
            margin: 0;
            font-size: 15px;
        }

        .delivery-card p {
            margin-top: 6px;
            font-size: 13px;
            color: #64748b;
        }

        .delivery-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }

        .delivery-card.active {
            border-color: #6366f1;
            background: #eef2ff;
            box-shadow: 0 15px 35px rgba(99,102,241,0.25);
        }

        /* ========== BUTTONS ========== */
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .btn:hover {
            background: #4CAF93;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--text-secondary);
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-danger {
            background: var(--trash-);
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* ========== ALERTS ========== */
        .alert {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            color: white;
            z-index: 1100;
            box-shadow: var(--shadow-lg);
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .alert-success {
            background: var(--sss-color);
        }

        .alert-error {
            background: var(--errr-color);
        }

        .alert-warning {
            background: var(--warning-color);
        }

        /* ========== MAP & CONTACT ========== */
        .contact-section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 3rem;
        }

        .map-container {
            padding: 30px;
        }

        .map-wrapper {
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            height: 450px;
        }

        .map-wrapper iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .info {
            padding: 30px;
            background: #f8f9fa;
            text-align: center;
        }

        .info h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .info p {
            color: #555;
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .info .icon {
            display: inline-block;
            margin-left: 8px;
            font-size: 1.2em;
        }

        .phone-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .phone-link:hover {
            text-decoration: underline;
        }

        /* ========== FOOTER ========== */
        .footer {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 3rem;
        }

        .footer p {
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .footer a {
            color: white;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .facebook-footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
        }

        .fb-logo {
            width: 50px;
            height: auto;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .fb-logo:hover {
            transform: scale(1.1);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                gap: 0.5rem;
                padding: 0.5rem 0;
            }

            .logo {
                width: 65px;
                height: 65px;
            }

            .store-name {
                font-size: 1.2rem !important;
            }

            .store-subtitle {
                font-size: 0.7rem;
            }

            .cart-button {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
                gap: 0.5rem;
            }

            .cart-count {
                width: 20px;
                height: 20px;
                font-size: 0.75rem;
            }

            .hero {
                padding: 2rem 0;
            }

            .hero h1 {
                font-size: 1.5rem;
                font-weight: 600;
            }

            .category {
                font-size: 0.85rem;
                padding: 0.5rem 1rem;
            }

            .products-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .products-container {
                padding: 1rem;
            }

            .modal-content {
                width: 95%;
            }

            .modal-body {
                padding: 1rem;
            }

            .delivery-cards {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .map-wrapper {
                height: 350px;
            }

            .container {
                padding: 0 15px;
            }

            .footer p {
                font-size: 0.85rem;
            }
        }

        @media (max-width: 480px) {
            .store-name {
                font-size: 1rem !important;
            }

            .logo {
                width: 50px;
                height: 50px;
            }

            .hero h1 {
                font-size: 1.3rem;
            }

            .product-name {
                font-size: 1rem;
            }

            .product-price {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- ========== HEADER ========== -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <img src="img/naksha logo.png" alt="Ù…Ø·Ø¹Ù… Ù†ÙƒØ´Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ" class="logo">
                    <div>
                        <h1 class="store-name">Ù†ÙƒØ´Ù‡ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ</h1>
                    </div>
                </div>
                <button class="cart-button" onclick="openCart()">
                    ğŸ›’ Ø§Ù„Ø³Ù„Ø©
                    <span class="cart-count" id="cart-count">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- ========== HERO ========== -->
    <section class="hero">
        <div class="container">
            <h1>Ø§Ø´ØªÙ‡ÙŠ.. Ø§Ø·Ù„Ø¨.. Ø§Ø³ØªÙ…ØªØ¹!</h1>
        </div>
    </section>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="container">
        <!-- Categories -->
        <div class="categories-wrapper">
            <div class="categories-container" id="categoriesContainer">
                <nav class="categories">
                    <button class="category active" onclick="filterProducts('Ø§Ù„ÙƒÙ„')">Ø§Ù„ÙƒÙ„</button>
                    <button class="category" onclick="filterProducts('Ø§Ù„Ø´Ø§ÙˆØ±Ù…Ø§')">ğŸŒ¯ Ø§Ù„Ø´Ø§ÙˆØ±Ù…Ø§</button>
                    <button class="category" onclick="filterProducts('Ø§Ù„Ø³Ù†Ø§Ùƒ')">ğŸŸ Ø§Ù„Ø³Ù†Ø§Ùƒ</button>
                    <button class="category" onclick="filterProducts('Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª')">ğŸ¥¤ Ø§Ù„Ù…Ù‚Ø¨Ù„Ø§Øª</button>
                </nav>
            </div>
        </div>

        <!-- Products -->
        <div class="products-container">
            <div id="loading" style="text-align: center; padding: 2rem;">
                <p style="color: white; font-size: 1.2rem;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...</p>
            </div>
            <div class="products-grid" id="products-grid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </main>

    <!-- ========== CONTACT SECTION ========== -->
    <div class="container">
        <div class="contact-section">
            <div class="map-container">
                <div class="map-wrapper">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3388.0069502612114!2d35.991879826953124!3d31.879227700000012!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151b594827aeac29%3A0xfd1a994f28595753!2z2YXYt9i52YUg2YbZg9i02KnYp9mE2YXYsdmD2LLZig!5e0!3m2!1sen!2sjo!4v1769959682807!5m2!1sen!2sjo" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>

            <div class="info">
                <h2>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„</h2>
                <p><span class="icon">ğŸ“</span> <strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> Ø³Ø­Ø§Ø¨ / Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ / Ù…Ø«Ù„Ø« Ø§Ù„Ø¯Ø®Ù„Ø©</p>
                <p><span class="icon">ğŸ“</span> <strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> <a href="tel:+962791930938" class="phone-link">+962791930938</a></p>
                <p><span class="icon">ğŸ•</span> <strong>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¯ÙˆØ§Ù…:</strong> Ù…Ù† 9 ØµØ¨Ø§Ø­Ø§Ù‹ Ù„ØºØ§ÙŠØ© 4 ÙØ¬Ø±Ø§Ù‹</p>
                <footer class="facebook-footer">
                    <a href="https://www.facebook.com/profile.php?id=100057636151417" target="_blank">
                        <img src="img/Subject.png" alt="ÙÙŠØ³Ø¨ÙˆÙƒ" class="fb-logo">
                    </a>
                </footer>
            </div>
        </div>
    </div>

    <!-- ========== FOOTER ========== -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Ù…Ø·Ø¹Ù… Ù†ÙƒØ´Ù‡ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            <p>Developed and Designed by Khaled Badran</p>
            <p><a href="tel:+962797459207">+962797459207</a></p>
        </div>
    </footer>

    <!-- ========== SCRIPTS ========== -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // ========== CONFIGURATION ==========
        const GITHUB_USER = 'badrankhaled813-star';
        const GITHUB_REPO = 'kbfjsnd.';
        const DATA_URL = `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/main/data.json`;

        const SUPABASE_URL = 'https://nxcjnxtvkacsaiikglhy.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_AbkphcROGqeua_aCIc_fAA_b8KNnYRh';
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // ========== GLOBAL VARIABLES ==========
        let cart = [];
        let currentProduct = {};
        let productsData = []; // ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª

        // ========== LOAD PRODUCTS FROM GITHUB ==========
        async function loadMenuFromGitHub() {
            try {
                console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...');

                const response = await fetch(DATA_URL + "?t=" + Date.now());

                if (!response.ok) {
                    throw new Error('ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ' + response.status);
                }

                const items = await response.json();
                productsData = items; // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                console.log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„', items.length, 'Ù…Ù†ØªØ¬');

                document.getElementById('loading').style.display = 'none';
                const container = document.getElementById('products-grid');
                container.innerHTML = '';

                items.forEach((item, index) => {
                    const card = `
                        <div class="product-card" data-category="${item.category}">
                            <img src="${item.image}" alt="${item.name}" class="product-image" onerror="this.src='img/naksha logo.png'">
                            <div class="product-info">
                                <h3 class="product-name">${item.name}</h3>
                                <p class="product-price">Ù…Ù† ${item.minPrice} Ø¯ÙŠÙ†Ø§Ø±</p>
                                <div class="prep-time">â±ï¸ ${item.prepTime === '1' ? 'ÙÙˆØ±Ø§Ù‹' : item.prepTime + ' Ø¯Ù‚Ø§Ø¦Ù‚'}</div>
                                <button class="product-button" data-name="${item.name}" data-index="${index}" onclick="showProductDetailsById(${index})">
                                    Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
                                </button>
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', card);
                });

                console.log('ğŸ‰ ØªÙ… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª!');

            } catch (error) {
                console.error('âŒ Ø®Ø·Ø£:', error);
                document.getElementById('loading').innerHTML = `
                    <p style="color: #E57373; font-size: 1.2rem;">
                        âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª<br>
                        <small>ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</small>
                    </p>
                `;
            }
        }

        // ========== SUPABASE INVENTORY TRACKING ==========
        async function watchInventory() {
            try {
                const { data, error } = await supabaseClient.from('inventory').select('*');

                if (error) {
                    console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", error.message);
                    return;
                }

                if (data) {
                    data.forEach(item => {
                        updateProductAvailability(item.product_name, item.status);
                    });
                }

                supabaseClient
                    .channel('inventory_changes')
                    .on('postgres_changes', {
                        event: 'UPDATE',
                        schema: 'public',
                        table: 'inventory'
                    }, payload => {
                        console.log("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ø­Ø¸ÙŠØ§Ù‹:", payload.new);
                        updateProductAvailability(payload.new.product_name, payload.new.status);
                    })
                    .subscribe();

            } catch (e) {
                console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹:", e);
            }
        }

        function updateProductAvailability(productName, status) {
            const btn = document.querySelector(`.product-button[data-name="${productName}"]`);
            if (btn) {
                if (status === "no") {
                    btn.innerText = "Ù†ÙØ°Øª Ø§Ù„ÙƒÙ…ÙŠØ©";
                    btn.disabled = true;
                    btn.style.backgroundColor = "#D32F2F";
                    btn.closest('.product-card').style.opacity = "0.6";
                } else {
                    btn.innerText = "Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©";
                    btn.disabled = false;
                    btn.style.backgroundColor = "";
                    btn.closest('.product-card').style.opacity = "1";
                }
            }
        }

        // ========== FILTER PRODUCTS ==========
        function filterProducts(category) {
            const products = document.querySelectorAll('.product-card');
            const categories = document.querySelectorAll('.category');

            categories.forEach(cat => cat.classList.remove('active'));
            event.target.classList.add('active');

            products.forEach(product => {
                if (category === 'Ø§Ù„ÙƒÙ„' || product.dataset.category === category) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
        }

        // ========== SHOW PRODUCT DETAILS BY INDEX ==========
        function showProductDetailsById(index) {
            const item = productsData[index];
            if (!item) return;

            const sizesArray = Object.keys(item.variations);
            const pricesObject = item.variations;

            currentProduct = {
                name: item.name,
                image: item.image,
                prices: pricesObject,
                sizes: sizesArray,
                prepTime: item.prepTime,
                selectedSize: sizesArray[0],
                quantity: 1
            };

            const modal = document.getElementById('productModal');
            if (!modal) {
                createProductModal();
            }

            updateProductModal();
            document.getElementById('productModal').style.display = 'block';
        }

        // ========== CREATE PRODUCT MODAL ==========
        function createProductModal() {
            const modal = document.createElement('div');
            modal.id = 'productModal';
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <button class="close-modal" onclick="closeProductModal()">Ã—</button>
                        <h2 id="modal-product-name"></h2>
                    </div>
                    <div class="modal-body">
                        <img id="modal-product-image" src="" alt="" style="width: 100%; border-radius: 12px; margin-bottom: 1rem;">
                        <h3 style="margin-bottom: 0.5rem;">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø¬Ù…:</h3>
                        <div class="size-options" id="size-options"></div>
                        <h3 style="margin-top: 1.5rem; margin-bottom: 0.5rem;">Ø§Ù„ÙƒÙ…ÙŠØ©:</h3>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <div class="quantity-display" id="quantity-display">1</div>
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                        <div class="cart-total" id="modal-price">Ø§Ù„Ø³Ø¹Ø±: 0 Ø¯ÙŠÙ†Ø§Ø±</div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="addToCart()">Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</button>
                        <button class="btn btn-secondary" onclick="closeProductModal()">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeProductModal();
                }
            });
        }

        // ========== UPDATE PRODUCT MODAL ==========
        function updateProductModal() {
            document.getElementById('modal-product-name').textContent = currentProduct.name;
            document.getElementById('modal-product-image').src = currentProduct.image;
            document.getElementById('quantity-display').textContent = currentProduct.quantity;

            const sizeOptions = document.getElementById('size-options');
            sizeOptions.innerHTML = '';

            currentProduct.sizes.forEach(size => {
                const sizeBtn = document.createElement('div');
                sizeBtn.className = 'size-option' + (size === currentProduct.selectedSize ? ' selected' : '');
                sizeBtn.textContent = `${size} - ${currentProduct.prices[size]} Ø¯ÙŠÙ†Ø§Ø±`;
                sizeBtn.onclick = () => selectSize(size, sizeBtn);
                sizeOptions.appendChild(sizeBtn);
            });

            updateModalPrice();
        }

        // ========== SELECT SIZE ==========
        function selectSize(size, element) {
            currentProduct.selectedSize = size;
            const sizeOptions = document.querySelectorAll('.size-option');
            sizeOptions.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            updateModalPrice();
        }

        // ========== QUANTITY CONTROLS ==========
        function increaseQuantity() {
            currentProduct.quantity++;
            document.getElementById('quantity-display').textContent = currentProduct.quantity;
            updateModalPrice();
        }

        function decreaseQuantity() {
            if (currentProduct.quantity > 1) {
                currentProduct.quantity--;
                document.getElementById('quantity-display').textContent = currentProduct.quantity;
                updateModalPrice();
            }
        }

        function updateModalPrice() {
            const price = currentProduct.prices[currentProduct.selectedSize] * currentProduct.quantity;
            document.getElementById('modal-price').textContent = `Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¯ÙŠÙ†Ø§Ø±`;
        }

        // ========== ADD TO CART ==========
        function addToCart() {
            const item = {
                name: currentProduct.name,
                size: currentProduct.selectedSize,
                quantity: currentProduct.quantity,
                price: currentProduct.prices[currentProduct.selectedSize],
                total: currentProduct.prices[currentProduct.selectedSize] * currentProduct.quantity,
                prepTime: currentProduct.prepTime
            };

            cart.push(item);
            updateCartCount();
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
            closeProductModal();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        function closeProductModal() {
            const modal = document.getElementById('productModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // ========== CART MODAL ==========
        function openCart() {
            if (cart.length === 0) {
                showAlert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!', 'warning');
                return;
            }

            const modal = document.getElementById('cartModal');
            if (!modal) {
                createCartModal();
            }

            updateCartModal();
            document.getElementById('cartModal').style.display = 'block';
        }

        function createCartModal() {
            const modal = document.createElement('div');
            modal.id = 'cartModal';
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <button class="close-modal" onclick="closeCart()">Ã—</button>
                        <h2>ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h2>
                    </div>
                    <div class="modal-body" id="cart-items"></div>
                    <div class="total-prep-time" id="total-prep-time"></div>
                    <div class="cart-total" id="cart-total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 Ø¯ÙŠÙ†Ø§Ø±</div>
                    <div class="modal-footer">
                        <button class="btn" onclick="proceedToCheckout()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
                        <button class="btn btn-secondary" onclick="closeCart()">Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³ÙˆÙ‚</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeCart();
                }
            });
        }

        function updateCartModal() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';

            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; padding: 2rem;">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>';
                return;
            }

            cart.forEach((item, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'cart-item';
                itemDiv.innerHTML = `
                    <div>
                        <strong>${item.name}</strong>
                        <br>
                        <small>Ø§Ù„Ø­Ø¬Ù…: ${item.size} | Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}</small>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <strong style="color: var(--primary-color);">${item.total} Ø¯ÙŠÙ†Ø§Ø±</strong>
                        <button class="btn btn-danger" style="padding: 0.5rem;" onclick="removeFromCart(${index})">ğŸ—‘ï¸</button>
                    </div>
                `;
                cartItems.appendChild(itemDiv);
            });

            const total = cart.reduce((sum, item) => sum + item.total, 0);
            document.getElementById('cart-total').textContent = `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¯ÙŠÙ†Ø§Ø±`;

            const totalPrepTime = Math.max(...cart.map(item => parseInt(item.prepTime) || 0));
            document.getElementById('total-prep-time').textContent = `â±ï¸ ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: ${totalPrepTime} Ø¯Ù‚ÙŠÙ‚Ø©`;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            updateCartModal();
            showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©', 'error');
        }

        function closeCart() {
            const modal = document.getElementById('cartModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // ========== CHECKOUT ==========
        function proceedToCheckout() {
            closeCart();
            const modal = document.getElementById('checkoutModal');
            if (!modal) {
                createCheckoutModal();
            }
            document.getElementById('checkoutModal').style.display = 'block';
        }

        function createCheckoutModal() {
            const modal = document.createElement('div');
            modal.id = 'checkoutModal';
            modal.className = 'modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <button class="close-modal" onclick="closeCheckout()">Ã—</button>
                        <h2>ğŸ“ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="customer-name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label>
                            <input type="text" id="customer-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
                            <div class="form-error" id="name-error">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…</div>
                        </div>

                        <div class="form-group">
                            <label for="customer-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                            <input type="tel" id="customer-phone" placeholder="07XXXXXXXX" required>
                            <div class="form-error" id="phone-error">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­ (ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 07)</div>
                        </div>

                        <div class="form-group">
                            <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… *</label>
                            <div class="delivery-cards">
                                <div class="delivery-card active" onclick="selectDelivery(this, true)">
                                    <div class="icon">ğŸšš</div>
                                    <h4>ØªÙˆØµÙŠÙ„</h4>
                                    <p>ÙŠÙˆØµÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù†Ø²Ù„</p>
                                    <input type="radio" name="deliveryMethod" value="delivery" checked hidden>
                                </div>

                                <div class="delivery-card" onclick="selectDelivery(this, false)">
                                    <div class="icon">ğŸª</div>
                                    <h4>Ø§Ø³ØªÙ„Ø§Ù…</h4>
                                    <p>Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…</p>
                                    <input type="radio" name="deliveryMethod" value="pickup" hidden>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" id="location-group">
                            <label for="customer-location">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *</label>
                            <textarea id="customer-location" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù†Ùƒ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ" required></textarea>
                            <div class="form-error" id="location-error">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</div>
                        </div>

                        <div class="form-group">
                            <label for="customer-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                            <textarea id="customer-notes" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ù„Ø¨"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" onclick="submitOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ğŸ“±</button>
                        <button class="btn btn-secondary" onclick="closeCheckout()">Ø±Ø¬ÙˆØ¹</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeCheckout();
                }
            });
        }

        function selectDelivery(card, isDelivery) {
            document.querySelectorAll('.delivery-card').forEach(c => {
                c.classList.remove('active');
                c.querySelector('input').checked = false;
            });

            card.classList.add('active');
            card.querySelector('input').checked = true;

            toggleLocation(isDelivery);
        }

        function toggleLocation(isDelivery) {
            const locationGroup = document.getElementById('location-group');
            const locationInput = document.getElementById('customer-location');
            const locationLabel = locationGroup.querySelector('label');

            if (isDelivery) {
                locationGroup.style.display = 'block';
                locationInput.required = true;
                locationLabel.innerHTML = 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù† *';
            } else {
                locationGroup.style.display = 'none';
                locationInput.required = false;
                locationInput.value = '';
                locationLabel.innerHTML = 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)';
            }
        }

        function closeCheckout() {
            const modal = document.getElementById('checkoutModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // ========== FORM VALIDATION ==========
        function validateForm() {
            let isValid = true;
            const name = document.getElementById('customer-name').value.trim();
            const phone = document.getElementById('customer-phone').value.trim();
            const location = document.getElementById('customer-location').value.trim();
            const deliveryMethod = document.querySelector('input[name="deliveryMethod"]:checked').value;

            document.querySelectorAll('.form-error').forEach(err => err.style.display = 'none');
            document.querySelectorAll('input, textarea').forEach(input => input.style.borderColor = 'var(--border-color)');

            if (!name) {
                document.getElementById('name-error').style.display = 'block';
                document.getElementById('customer-name').style.borderColor = 'var(--danger-color)';
                isValid = false;
            }

            const phoneRegex = /^07[0-9]{8}$/;
            if (!phone || !phoneRegex.test(phone)) {
                document.getElementById('phone-error').style.display = 'block';
                document.getElementById('customer-phone').style.borderColor = 'var(--danger-color)';
                isValid = false;
            }

            if (deliveryMethod === 'delivery' && !location) {
                document.getElementById('location-error').style.display = 'block';
                document.getElementById('customer-location').style.borderColor = 'var(--danger-color)';
                isValid = false;
            }

            return isValid;
        }

        // ========== SUBMIT ORDER ==========
        function submitOrder() {
            if (!validateForm()) {
                return;
            }

            const name = document.getElementById('customer-name').value.trim();
            const phone = document.getElementById('customer-phone').value.trim();
            const location = document.getElementById('customer-location').value.trim();
            const notes = document.getElementById('customer-notes').value.trim();
            const deliveryMethod = document.querySelector('input[name="deliveryMethod"]:checked').value;
            const deliveryText = deliveryMethod === 'delivery' ? 'ğŸšš ØªÙˆØµÙŠÙ„' : 'ğŸª Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø·Ø¹Ù…';

            let message = `ğŸ›’ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…Ø·Ø¹Ù… Ù†ÙƒØ´Ù‡ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ*\n\n`;
            message += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}\n`;
            message += `ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${phone}\n`;
            message += `ğŸ“¦ *Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…:* ${deliveryText}\n`;

            if (deliveryMethod === 'delivery') {
                message += `ğŸ“ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${location}\n`;
            }

            message += `\nğŸ“¦ *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:*\n`;
            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;

            let total = 0;
            cart.forEach((item, index) => {
                message += `${index + 1}. ${item.name}\n`;
                message += `   Ø§Ù„Ø­Ø¬Ù…: ${item.size}\n`;
                message += `   Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}\n`;
                message += `   Ø§Ù„Ø³Ø¹Ø±: ${item.total} Ø¯ÙŠÙ†Ø§Ø±\n\n`;
                total += item.total;
            });

            message += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            message += `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¯ÙŠÙ†Ø§Ø±*\n\n`;

            const totalPrepTime = Math.max(...cart.map(item => parseInt(item.prepTime) || 0));
            message += `â±ï¸ *ÙˆÙ‚Øª Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:* ${totalPrepTime} Ø¯Ù‚ÙŠÙ‚Ø©\n\n`;

            if (notes) {
                message += `ğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${notes}\n\n`;
            }

            message += `â° ÙˆÙ‚Øª Ø§Ù„Ø·Ù„Ø¨: ${new Date().toLocaleString('ar-JO')}`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappNumber = '962788709412';
            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

            window.open(whatsappURL, '_blank');

            cart = [];
            updateCartCount();
            closeCheckout();

            showAlert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹', 'success');

            setTimeout(() => {
                document.getElementById('customer-name').value = '';
                document.getElementById('customer-phone').value = '';
                document.getElementById('customer-location').value = '';
                document.getElementById('customer-notes').value = '';
            }, 1000);
        }

        // ========== ALERT SYSTEM ==========
        function showAlert(message, type) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            document.body.appendChild(alert);

            setTimeout(() => {
                alert.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(alert);
                }, 300);
            }, 3000);
        }

        // ========== CATEGORY SLIDER ==========
        (function() {
            const slider = document.getElementById('categoriesContainer');
            if (!slider) return;

            let isDown = false;
            let startX;
            let scrollLeft;

            slider.addEventListener('mousedown', (e) => {
                isDown = true;
                slider.style.cursor = 'grabbing';
                startX = e.pageX - slider.offsetLeft;
                scrollLeft = slider.scrollLeft;
            });

            slider.addEventListener('mouseleave', () => {
                isDown = false;
                slider.style.cursor = 'grab';
            });

            slider.addEventListener('mouseup', () => {
                isDown = false;
                slider.style.cursor = 'grab';
            });

            slider.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - slider.offsetLeft;
                const walk = (x - startX) * 2;
                slider.scrollLeft = scrollLeft - walk;
            });
        })();

        // ========== INITIALIZE ==========
        loadMenuFromGitHub();
        watchInventory();
    </script>
</body>
</html>
